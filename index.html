<!DOCTYPE html><html lang="ru"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><title>ESX</title><link href="css/styles.css" rel="stylesheet"><script data-main="js/presentation" src="js/requirejs/require.js"></script></head><body><form action="/select/slide" method="post" class="go-to-page"><fieldset><input type="text" maxlength="3" value="" placeholder="1"></fieldset></form><section class="progress"><div class="value"></div></section><section id="slides" class="dark"><article class="title-slide"><h1>ESX</h1></article><article>JavaScript это имплементация стандарта ECMAScript</article><article class="center qrcode"><div class="wrapper"><div class="half"><h2>ECMA–262 5.1 (Harmony)</h2></div><div class="half"><img src="images/ecma.svg" alt="QRCODE cо ссылкой на ECMA–262"></div><p> <a href="https://www.ecma-international.org/ecma-262/5.1/" data-click>http://ecma-international.org/ecma-262/5.1/</a></p></div></article><article class="center qrcode"><div class="wrapper"><div class="half"><h2>ECMA–262 v. 7 2016</h2></div><div class="half"><img src="images/ecma.svg" alt="QRCODE cо ссылкой на ECMA–262"></div><p> <a href="http://www.ecma-international.org/publications/standards/Ecma-262.htm" data-click>http://www.ecma-international.org/publications/standards/Ecma-262.htm</a></p></div></article><article>The Ecma International Technical Committee 39 (aka TC39)    </article><article><ol> <li>1997</li><li>1998</li><li>1999</li><li>выбросили</li><li>2009 <ol> <li>2011 </li></ol></li><li class="short-releases">2015</li><li>2016</li></ol></article><article><ol start="0"><li>Strawman (Идея)</li><li>Proposal (Предложение)</li><li>Draft (Черновик)</li><li>Candidate (Кандидат)</li><li>Finished (Завершено)</li></ol></article><article class="center qrcode"><div class="wrapper"><div class="half"><h2>Процесс TC39</h2></div><div class="half"><img src="images/ecma.svg" alt="QRCODE cо ссылкой на процесс TC39"></div><p> <a href="https://tc39.github.io/process-document/" data-click>https://tc39.github.io/process-document/</a></p></div></article><article><h1>Идея</h1><p> Может внести член TC39 или зарегистрированный контрибьютор TC39</p><ul> <li>надо рассмотреть на встрече TC39</li><li>надо добавить на страничку со Stage-0 </li></ul></article><article class="center qrcode"><div class="wrapper"><div class="half"><h2>Регистрация контрибьютора</h2></div><div class="half"><img src="images/ecma.svg" alt="QRCODE cо ссылкой на ECMA–262"></div><p> <a href="http://www.ecma-international.org/memento/contribute_TC39_Royalty_Free_Task_Group.php" data-click>http://www.ecma-international.org/memento/contribute_TC39_Royalty_Free_Task_Group.php</a></p></div></article><article class="center qrcode"><div class="wrapper"><div class="half"><h2>STAGE 0</h2></div><div class="half"><img src="images/ecma.svg" alt="QRCODE cо ссылкой на ECMA–262"></div><p> <a href="https://github.com/tc39/proposals/blob/master/stage-0-proposals.md" data-click>https://github.com/tc39/proposals/blob/master/stage-0-proposals.md</a></p></div></article><article class="screen screen--stage-0"></article><article><h1>Предложение </h1><p>Могут отказать или отложить</p><ul> <li>Должен быть выбран человек, формально ответственный за предложение</li><li>Либо этот человек, либо его помошник должен быть членом TC39</li><li>Должна быть описана проблема, которая решается</li><li>Должны быть обозначены проблемы, которые будут с внесением в спеку</li><li>Примеры, полифилы</li></ul></article><article class="center qrcode"><div class="wrapper"><div class="half"><h2>Неактивные</h2><ul><li>Отложеные</li><li>Отозваные</li><li>Отвергнутые</li></ul></div><div class="half"><img src="images/ecma.svg" alt="QRCODE cо ссылкой на неактивные предложения"></div><p> <a href="https://github.com/tc39/proposals/blob/master/inactive-proposals.md" data-click>https://github.com/tc39/proposals/blob/master/inactive-proposals.md</a></p></div></article><article><h1>Черновик</h1><p>Переписано может быть всё</p><ul><li>Максимально полное формальное описание, но могут быть и todo</li><li>Нужны две имплементации, но одна может быть в транспайлере, например Babel</li></ul></article><article><h1>Кандидат</h1><p>Инкриментальные изменения</p><ul> <li>Текст спецификации должен быть закончен</li><li>Назначены рецензенты</li><li>Редактор спецификации ECMAScript должен её подписать</li><li>Минимум две имплементации</li></ul></article><article class="center qrcode"><div class="wrapper"><div class="half"><h2>STAGE 1-3</h2></div><div class="half"><img src="images/ecma.svg" alt="QRCODE cо ссылкой на Stage 1-3"></div><p> <a href="https://github.com/tc39/proposals" data-click>http://github.com/tc39/proposals</a></p></div></article><article><h1>Завершено</h1><p>Изменения только если обнаружены критические ошибки</p><ul><li>Тесты</li><li>Две имплементации которые их проходят</li><li>Опыт использования имплементаций</li><li>Редактор спецификации ECMAScript должен её подписать</li></ul></article><article class="center qrcode"><div class="wrapper"><div class="half"><h2>STAGE 4</h2></div><div class="half"><img src="images/ecma.svg" alt="QRCODE cо ссылкой на Stage 4"></div><p> <a href="https://github.com/tc39/proposals/blob/master/finished-proposals.md" data-click>https://github.com/tc39/proposals/blob/master/finished-proposals.md</a></p></div></article><article><ul><li>V8 — Chrome, Chromium, Node.js, Opera, Electron, Vivaldi, Couchbase …</li><li>SpiderMonkey — Firefox</li><li>JavaScriptCore — Safari</li><li>Chakra — IE</li><li>…</li></ul></article><article class="center qrcode"><div class="wrapper"><div class="half"><h2>Список движков</h2></div><div class="half"><img src="images/ecma.svg" alt="QRCODE cо ссылкой на список движков"></div><p> <a href="https://en.wikipedia.org/wiki/List_of_ECMAScript_engines" data-click>https://en.wikipedia.org/wiki/List_of_ECMAScript_engines</a></p></div></article><article class="illustration illustration--why cloud center"><h1> <p class="wrapper">Как<br><b>зачем?</b></p></h1></article><article class="cloud center illustration illustration--speed"><h1> <p class="wrapper">Сравните<br>cкорость</p></h1></article><article class="center qrcode compare"><div class="wrapper"><div class="half"><h2>Сравнение быстродействия нативных функций и jQuery</h2></div><div class="half"><img src="images/compare.svg" alt="QRCODE cо ссылкой на статью о сравнении скоростей"></div><p> <a href="https://codepen.io/doughensel/post/10-libraries" data-click>https://codepen.io/doughensel/post/10-libraries</a></p></div></article><article class="center comparer chrome"><div class="wrapper"><div class="half"><h2>169.310ms</h2></div><div class="half"><h2>693.480ms</h2></div></div></article><article class="center comparer safari"><div class="wrapper"><div class="half"><h2>164.063ms</h2></div><div class="half"><h2>1 164.516ms</h2></div></div></article><article class="center comparer firefox"><div class="wrapper"><div class="half"><h2>222.696ms</h2></div><div class="half"><h2>464.386ms</h2></div></div></article><article class="cloud center illustration illustration--tools"><h1> <p class="wrapper">Наши <b>инструменты</b></p></h1></article><article class="cloud center illustration illustration--canwe"><h1> <p class="wrapper">Can we?</p></h1></article><article class="cloud center illustration illustration--wecan"><h1> <p class="wrapper">Yes, we can!</p></h1></article><article class="screen screen--support-es6"></article><article class="screen screen--support-es7"></article><article class="screen screen--support-esnext"></article><article class="center qrcode compare"><div class="wrapper"><div class="half"><h2>Поддержка ES6 в браузерах</h2></div><div class="half"><img src="images/support.svg" alt="QRCODE cо ссылкой на статью о сравнении скоростей"></div><p> <a href="http://kangax.github.io/compat-table/es6/" data-click>http://kangax.github.io/compat-table/es6/</a></p></div></article><article class="cloud center illustration illustration--transpiler"><h1> <p class="wrapper">Транспайлеры</p></h1></article><article class="center qrcode transpiler"><div class="wrapper"><div class="half"><h2>Babel.js</h2></div><div class="half"><img src="images/babel.svg" alt="QRCODE cо ссылкой на babel.js"></div><p> <a href="https://babeljs.io/" data-click>https://babeljs.io/</a></p></div></article><article class="center qrcode transpiler"><div class="wrapper"><div class="half"><h2>TypeScript</h2></div><div class="half"><img src="images/typescript.svg" alt="QRCODE cо ссылкой на TypeScript"></div><p> <a href="https://www.typescriptlang.org/" data-click>https://typescriptlang.org/</a></p></div></article><article class="center qrcode transpiler"><div class="wrapper"><div class="half"><h2>Traceur</h2></div><div class="half"><img src="images/traceur.svg" alt="QRCODE cо ссылкой на Traceur"></div><p> <a href="https://github.com/google/traceur-compiler" data-click>https://github.com/google/traceur-compiler</a></p></div></article><article class="center qrcode transpiler"><div class="wrapper"><div class="half"><h2>Buble</h2></div><div class="half"><img src="images/buble.svg" alt="QRCODE cо ссылкой на buble"></div><p> <a href="https://buble.surge.sh/" data-click>https://buble.surge.sh/</a></p></div></article>
<article class="cloud center illustration illustration--babel"><h1> <p class="wrapper">Babel.js</p></h1></article><article class="screen screen--sandbox"></article><article class="illustration illustration--grunt"></article><article class="center code-1"><div class="wrapper"><pre><code>npm init
npm install --save grunt
npm install --save grunt-babel
npm install --save babel-preset-es2015
npm install --save load-grunt-tasks
vi Gruntfile.js</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code class="javascript">// Gruntfile.js
module.exports = function (grunt) {
  require("load-grunt-tasks")(grunt);
  grunt.initConfig (
      //…
  );
  grunt.registerTask("default", ["babel"]);
};"</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code class="javascript">// Gruntfile.js, Задача
{babel: {
  options: {
      sourceMap: true,
      presets: ['babel-preset-es2015']
  },
  dist: {files: [
      //…
  ]}}}</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code class="javascript">// Gruntfile.js, Пути к файлам, статические
{
  'js/script_1.js': 'js/source/script_1.js',
  'js/script_2.js': 'js/source/script_2.js'
}</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code class="javascript">// Gruntfile.js, Пути к файлам, динамические
{
      expand: true,
      cwd: 'js/source/',
      src: ['**/*.js'],
      dest: 'js/'
}</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code># package.info
…
scripts": {
  "build": "grunt --verbose"
},"
…</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code>npm run build</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code>npm install --save grunt-contrib-watch</code></pre></div></article><article class="center code-2"><div class="wrapper"><pre><code class="javascript">// Gruntfile.js, Задача
watch: {
  scripts: {
      files: ['js/source/**/*.js'],   
      tasks: ['watch'],
  }
}
// …
grunt.registerTask("dev", ["babel","watch"]);</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code># package.info
# …
scripts": {
  "build": "grunt --verbose"
  "watch": "grunt watch --verbose"
},"
# …</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code>npm run watch</code></pre></div></article><article class="illustration illustration--gulp"></article><article class="center code-1"><div class="wrapper"><pre><code>npm init
npm install --save gulp
npm install --save gulp-sourcemaps
npm install --save gulp-babel
npm install --save babel-preset-es2015
vi gulpfile.js</code></pre></div></article><article class="center code-3"><div class="wrapper"><pre><code>// gulpfile.js
var gulp = require("gulp");
var sourcemaps = require("gulp-sourcemaps");
var babel = require("gulp-babel");
gulp.task("babel", function () {
  return gulp.src("js/source/**/*.js")
      .pipe(sourcemaps.init())
      .pipe(babel({presets: ['es2015']}))
      .pipe(sourcemaps.write("."))
      .pipe(gulp.dest("js/"));
});
gulp.task("default", ["babel"]);</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code># package.info
# …
scripts": {
  "build": "gulp --verbose"
},"
# …</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code>npm run build</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code>gulp.task("watch", ["babel"], function() {
  var watcher = gulp.watch('js/source/**/*.js',
                          ['babel']);
});</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code># package.info
# …
scripts": {
  "build": "gulp --verbose"
  "watch": "gulp watch --verbose"
},"
# …</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code>npm run watch</code></pre></div></article><article class="illustration illustration--m"></article><article class="illustration illustration--m1"></article><article class="illustration illustration--vaimo"></article><article class="center code-2"><div class="wrapper"><pre><code>aja project add-module vaimo/themebuilder:dev-develop
cd ./vendor/vaimo/themebuilder/
hg update 0d1c77d
nvm install 6.3.1
npm cache clean
npm install
qrc</code></pre></div></article><article class="screen screen--builder"></article><article class="center code-1"><div class="wrapper"><pre><code>script.es6</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code>npm run gulp</code></pre></div></article><article class="illustration illustration--m2"></article><article class="center code-1"><div class="wrapper"><pre><code>m2:root/
  package.json
  Gruntfile.js</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code>npm install
npm install --save grunt-babel
npm install --save babel-preset-es2015</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code>composer require demo-vendor/demo-m2-theme</code></pre></div></article><article class="screen screen--admin-theme"></article><article class="screen screen--admin-config"></article><article class="center code-1"><div class="wrapper"><pre><code>m2:root/
      dev/
          tools/
              grunt/
                  configs/
                      themes.js
                      combo.js
                      babel.js</code></pre></div></article><article class="center qrcode config"><div class="wrapper"><div class="half"><h2>Magento 2 конфигурация <br>транспайлера</h2></div><div class="half"><img src="images/configuration.svg" alt="QRCODE cо ссылкой на файлы конфигурацц"></div><p> <a href="https://gist.github.com/SilentImp/d440f2805787d68f3aa5cc4f9fca4200" data-click>https://goo.gl/GJakUU</a></p></div></article><article class="center code-2"><div class="wrapper"><pre><code>// themes.js
dm2: {
        area: 'frontend',
        name: 'demo-vendor/demo-m2-theme',
        locale: 'en_US',
        files: ['css/styles-m','css/styles-l'],
        dsl: 'less'
        // …
    },</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code>// themes.js, конфиг babel.js
babelFiles: [{
    expand: true,
    cwd: 'js/source/',
    src: ['**/*.js'],
    dest: 'js/'
}]</code></pre></div></article><article class="center code-2"><div class="wrapper"><pre><code>// combo.js
var theme = require('./themes'),
    path = require('./path'),
    refine_path = function (theme, file_path) {
      return path.pub +
          theme.area + '/' +
          theme.name + '/' +
          theme.locale + '/' + 
          file_path;
    };</code></pre></div></article><article class="center code-3"><div class="wrapper"><pre><code>// combo.js
babelFiles: function (themeName) {
    var es6Files = [],
        ourTheme = theme[themeName],
        files = ourTheme.babelFiles;
    for (var i = 0; i < files.length; i++) {
        if (typeof files[i].src == "undefined") {
            // static file mapping
        } else {
            // dynamic file mapping
        }
    }
    return es6Files;
},</code></pre></div></article><article class="center code-2"><div class="wrapper"><pre><code>// combo.js, static file mapping
var path_collection = {};
for (var target in files[i]) {
    path_collection[refine_path(ourTheme, target)] = 
          refine_path(ourTheme, files[i][target]); 
}
es6Files.push(path_collection);</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code class="javascript">// combo.js, dynamic file mapping
files.cwd = refine_path(ourTheme, files.cwd);
files.dest = refine_path(ourTheme, files.dest);
es6Files.push(files);</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code>// babel.js, переменные
'use strict';
var combo  = require('./combo'),
    themes = require('./themes'),
    _      = require('underscore'),
    themeOptions = {};</code></pre></div></article><article class="center code-2"><div class="wrapper"><pre><code>// babel.js, пути к файлам
_.each(themes, function(theme, name) {
    if (typeof theme.babelFiles != "undefined") {
        themeOptions[name] = {
            files: combo.babelFiles(name)
        };
    }
});</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code>// babel.js, настройки транспайлера
var babelOptions = {
    options: {
        sourceMap: true,
        presets: ['babel-preset-es2015']
    }
};</code></pre></div></article><article class="center code-2"><div class="wrapper"><pre><code class="javascript">// babel.js, экспорт конфигурации
module.exports = _.extend(themeOptions, babelOptions);</code></pre></div></article><article class="center code-2"><div class="wrapper"><pre><code>php bin/magento setup:static-content:deploy
grunt less:dm2
grunt babel:dm2
php bin/magento cache:flush</code></pre></div></article><article class="screen screen--alert"></article><article class="contacts center qrcode"><div class="wrapper"><div class="about-speaker half"><p class="name">Антон Немцев</p><p class="twitter">@silentimp</p><p class="link">http://silentimp.info/</p><p class="email">anton.nemtsev@vaimo.com</p><p class="skype">skype: ravencry</p></div><div class="half"><img src="images/git.svg" alt="QRCODE cо ссылкой на доклад"></div><p> <a href="https://github.com/SilentImp/ES6Intro" data-click>https://github.com/SilentImp/ES6Intro</a></p></div></article></section></body></html>